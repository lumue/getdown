<script src="../node_modules/redux/dist/redux.js"></script>

<script>

(function() {

	function tasksReducer(state={tasks:[],isAdding:false,isFetching:false},action)
	{
		switch (action.type) {

			case 'POST_TASK': {
				return Object.assign({}, state, {
					isAdding: true
				})
			}

			case 'TASKS_ADDED': {
				const items = state.tasks.concat(action.tasks)
				return Object.assign({}, state, {
					tasks: items
				})
			}

			case 'REQUEST_TASKS': {
				return Object.assign({}, state, {
					isFetching: true
				})
			}
			case 'RECEIVE_TASKS': {
				return Object.assign({}, state, {
					isFetching: false,
					tasks: action.tasks,
					lastUpdated: action.receivedAt
				})
			}
			default:
				return state
		}
	}

	function configReducer(state = {apiUrl: '/api/'}, action) {
		switch (action.type) {
			case 'UPDATE_APIURL':
				return Object.assign({}, state, {
					apiUrl: action.apiUrl
				})
			default:
				return state
		}
	}

	GetdownConsole.rootReducer = Redux.combineReducers({tasksReducer,configReducer})
}());
</script>