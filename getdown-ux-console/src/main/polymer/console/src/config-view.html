<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/polymer/lib/elements/custom-style.html">
<link rel="import" href="../bower_components/vaadin-form-layout/vaadin-form-item.html">
<link rel="import" href="../bower_components/vaadin-form-layout/vaadin-form-layout.html">
<link rel="import" href="../bower_components/vaadin-material-theme/vaadin-text-field.html">
<link rel="import" href="../bower_components/vaadin-text-field/vaadin-text-field.html">
<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/paper-styles/shadow.html">
<link rel="import" href="../bower_components/paper-styles/color.html">
<link rel="import" href="shared-styles.html">
<link rel="import" href="redux-store.html">


<dom-module id="config-view">
	<template>
		<style include="shared-styles">
			:host {
				display: block;

				padding: 10px;
			}

			paper-button.indigo {
				background-color: var(--paper-indigo-500);
				color: white;
				--paper-button-raised-keyboard-focus: {
					background-color: var(--paper-pink-a200) !important;
					color: white !important;
				};
			}

			vaadin-form-layout.with-text-fields > vaadin-text-field {
				margin-top: .5em;
				margin-bottom: .5em;
			}
		</style>

		<custom-style>
			<style is="custom-style" include="paper-material-styles"></style>
		</custom-style>

		<vaadin-form-layout class="with-text-fields">

			<div class="paper-material" elevation="1" style="padding: 10px;">
				<vaadin-form-item>
					<vaadin-text-field id="hostInput" label="API Host" value="[[host]]"></vaadin-text-field>
				</vaadin-form-item>
				<vaadin-form-item>
					<vaadin-text-field id="portInput" label="API Port" value="[[port]]"></vaadin-text-field>
				</vaadin-form-item>
				<vaadin-form-item>
					<paper-button class="indigo" on-tap="handleApply">Apply</paper-button>
				</vaadin-form-item>
			</div>

		</vaadin-form-layout>

	</template>

	<script>
		class ConfigView extends GetdownConsole.ReduxMixin(Polymer.Element) {
			static get is() {
				return 'config-view';
			}


			static get properties() {
				return {
					port: {
						type: String,
						statePath: 'configReducer.apiPort'
					},
					host: {
						type: String,
						statePath: 'configReducer.apiHost'
					}
				}
			}

			handleApply() {
				this.dispatch('updateApiLocation', this.$.hostInput.value, this.$.portInput.value)
			}
		}

		window.customElements.define(ConfigView.is, ConfigView);
	</script>
</dom-module>
